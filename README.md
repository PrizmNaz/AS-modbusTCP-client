# Modbus TCP Сервер

Этот проект представляет собой реализацию Modbus TCP сервера на Python, который может работать в локальной сети и обрабатывать кастомные запросы.

## Особенности

- Поддержка всех стандартных функций Modbus
- Асинхронная работа на основе asyncio
- Настраиваемые параметры через .env файл
- Логирование всех операций
- Поддержка различных типов регистров (Coils, Discrete Inputs, Holding Registers, Input Registers)

## Установка

1. Клонируйте репозиторий
2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Конфигурация

Настройки сервера хранятся в файле `.env`:
- MODBUS_HOST - IP-адрес для прослушивания (по умолчанию 0.0.0.0)
- MODBUS_PORT - порт для прослушивания (по умолчанию 502)

## Запуск

```bash
python modbus_server.py
```

## Использование

Сервер поддерживает следующие типы регистров:
- 'co' - Coils (дискретные выходы)
- 'di' - Discrete Inputs (дискретные входы)
- 'hr' - Holding Registers (регистры хранения)
- 'ir' - Input Registers (регистры ввода)

### Пример работы с регистрами

```python
# Обновление значения регистра
server.update_register('hr', 0, 100)  # Установка значения 100 в holding register по адресу 0

# Получение значения регистра
value = server.get_register('hr', 0)  # Получение значения из holding register по адресу 0
```

## Логирование

Логи сохраняются в файл `modbus_server.log` с ежедневной ротацией и хранением в течение 7 дней. 